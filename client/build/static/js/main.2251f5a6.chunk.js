(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{183:function(e,t,n){},185:function(e,t,n){},186:function(e,t,n){},217:function(e,t){},219:function(e,t){},30:function(e,t,n){e.exports={options:"Options_options__2cDuB",btn:"Options_btn__2_PWk",inputgroup:"Options_inputgroup__1Swk2",btnDiv:"Options_btnDiv__2Nq34",phone:"Options_phone__32hnI",answer:"Options_answer__2kn1h",decline:"Options_decline__1e5zN",hang:"Options_hang__3wi_t",share_options:"Options_share_options__3G8nu",share_social:"Options_share_social__IGi0H",share_icon:"Options_share_icon__1Qx0q"}},300:function(e,t,n){},306:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),s=n(15),i=n.n(s),o=(n(183),n(184),n(185),n(164)),r=n(17),l=n(98),u=n(16),d=Object(c.createContext)(),j=(n(186),n(311)),b=n(174),m=n(313),f=n(312),h=n.p+"static/media/video.e038b670.svg",g=n(114),O=n.p+"static/media/video-off.81281c31.svg",p=n.p+"static/media/msg_illus.a7fd59ce.svg",v=n.p+"static/media/msg.590bd963.svg",x=n.p+"static/media/share_screen.35f2d549.svg",y=n(314),S=n(315),C=n(115),k=n.n(C),w=n(168),_=n(4),N=Object(g.io)("https://quickchat12.herokuapp.com/"),M=function(e){var t=e.children,n=Object(c.useState)(!1),a=Object(u.a)(n,2),s=a[0],i=a[1],o=Object(c.useState)(!1),r=Object(u.a)(o,2),j=r[0],b=r[1],m=Object(c.useState)(),f=Object(u.a)(m,2),h=f[0],g=f[1],O=Object(c.useState)([]),p=Object(u.a)(O,2),v=p[0],x=p[1],y=Object(c.useState)(""),S=Object(u.a)(y,2),C=S[0],M=S[1],R=Object(c.useState)({}),I=Object(u.a)(R,2),T=I[0],A=I[1],V=Object(c.useState)(""),E=Object(u.a)(V,2),U=E[0],D=E[1],F=Object(c.useState)(""),q=Object(u.a)(F,2),z=q[0],P=q[1],W=Object(c.useState)(""),B=Object(u.a)(W,2),L=B[0],G=B[1],H=Object(c.useState)(!0),J=Object(u.a)(H,2),Q=J[0],X=J[1],Y=Object(c.useState)(),$=Object(u.a)(Y,2),K=$[0],Z=$[1],ee=Object(c.useState)(!0),te=Object(u.a)(ee,2),ne=te[0],ce=te[1],ae=Object(c.useState)(),se=Object(u.a)(ae,2),ie=se[0],oe=se[1],re=Object(c.useState)(""),le=Object(u.a)(re,2),ue=le[0],de=le[1],je=Object(c.useState)(!1),be=Object(u.a)(je,2),me=be[0],fe=be[1],he=Object(c.useRef)(),ge=Object(c.useRef)(),Oe=Object(c.useRef)(),pe=Object(c.useRef)();Object(c.useEffect)((function(){navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){g(e),he.current.srcObject=e})),localStorage.getItem("name")&&M(localStorage.getItem("name")),N.on("me",(function(e){return D(e)})),N.on("endCall",(function(){window.location.reload()})),N.on("updateUserMedia",(function(e){var t=e.type,n=e.currentMediaStatus;if(null!==n||n!==[])switch(t){case"video":Z(n);break;case"mic":oe(n);break;default:oe(n[0]),Z(n[1])}})),N.on("callUser",(function(e){var t=e.from,n=e.name,c=e.signal;A({isReceivingCall:!0,from:t,name:n,signal:c})})),N.on("msgRcv",(function(e){e.name;var t=e.msg,n=e.sender;de({value:t,sender:n}),setTimeout((function(){de({})}),2e3)}))}),[]);return Object(_.jsx)(d.Provider,{value:{call:T,callAccepted:s,myVideo:he,userVideo:ge,stream:h,name:C,setName:M,callEnded:j,me:U,callUser:function(e){var t=new k.a({initiator:!0,trickle:!1,stream:h});G(e),t.on("signal",(function(t){N.emit("callUser",{userToCall:e,signalData:t,from:U,name:C})})),t.on("stream",(function(e){ge.current.srcObject=e})),N.on("callAccepted",(function(e){var n=e.signal,c=e.userName;i(!0),P(c),t.signal(n),N.emit("updateMyMedia",{type:"both",currentMediaStatus:[ne,Q]})})),Oe.current=t,console.log(Oe.current)},leaveCall:function(){b(!0),Oe.current.destroy(),N.emit("endCall",{id:L}),window.location.reload()},answerCall:function(){i(!0),G(T.from);var e=new k.a({initiator:!1,trickle:!1,stream:h});e.on("signal",(function(e){N.emit("answerCall",{signal:e,to:T.from,userName:C,type:"both",myMediaStatus:[ne,Q]})})),e.on("stream",(function(e){ge.current.srcObject=e})),e.signal(T.signal),Oe.current=e,console.log(Oe.current)},sendMsg:function(e){N.emit("msgUser",{name:C,to:L,msg:e,sender:C});var t={};t.msg=e,t.type="sent",t.timestamp=Date.now(),t.sender=C,x([].concat(Object(l.a)(v),[t]))},msgRcv:ue,chat:v,setChat:x,setMsgRcv:de,setOtherUser:G,leaveCall1:function(){N.emit("endCall",{id:L})},userName:z,myVdoStatus:Q,setMyVdoStatus:X,userVdoStatus:K,setUserVdoStatus:Z,updateVideo:function(){X((function(e){return N.emit("updateMyMedia",{type:"video",currentMediaStatus:!e}),h.getVideoTracks()[0].enabled=!e,!e}))},myMicStatus:ne,userMicStatus:ie,updateMic:function(){ce((function(e){return N.emit("updateMyMedia",{type:"mic",currentMediaStatus:!e}),h.getAudioTracks()[0].enabled=!e,!e}))},screenShare:me,handleScreenSharing:function(){Q?me?pe.current.onended():navigator.mediaDevices.getDisplayMedia({cursor:!0}).then((function(e){var t=e.getTracks()[0];Oe.current.replaceTrack(Oe.current.streams[0].getTracks().find((function(e){return"video"===e.kind})),t,h),t.onended=function(){Oe.current.replaceTrack(t,Oe.current.streams[0].getTracks().find((function(e){return"video"===e.kind})),h),he.current.srcObject=h,fe(!1)},he.current.srcObject=e,pe.current=t,fe(!0)})).catch((function(e){console.log("No stream for sharing")})):w.b.error("Turn on your video to share the content",2)},fullScreen:function(e){var t=e.target;t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen()}},children:t})},R=j.a.Search,I=function(){var e=Object(c.useContext)(d),t=e.call,n=e.callAccepted,a=e.myVideo,s=e.userVideo,i=e.stream,o=e.name,r=(e.setName,e.callEnded),j=(e.me,e.callUser,e.leaveCall,e.answerCall,e.sendMsg),g=e.msgRcv,C=e.chat,k=e.setChat,w=e.userName,M=e.myVdoStatus,I=(e.screenShare,e.fullScreen),T=e.handleScreenSharing,A=e.userVdoStatus,V=e.updateVideo,E=e.myMicStatus,U=e.userMicStatus,D=e.updateMic,F=Object(c.useState)(""),q=Object(u.a)(F,2),z=q[0],P=q[1],W=Object(c.useState)(!1),B=Object(u.a)(W,2),L=B[0],G=B[1];N.on("msgRcv",(function(e){e.name;var t=e.msg,n=e.sender,c={};c.msg=t,c.type="rcv",c.sender=n,c.timestamp=Date.now(),k([].concat(Object(l.a)(C),[c]))}));var H=Object(c.useRef)();Object(c.useEffect)((function(){(null===H||void 0===H?void 0:H.current)&&H.current.scrollIntoView({behavior:"smooth"})}),[C]);var J=function(e){G(e)};return Object(c.useEffect)((function(){g.value&&!L&&b.a.open({message:"",description:"".concat(g.sender,": ").concat(g.value),icon:Object(_.jsx)(y.a,{style:{color:"#108ee9"}})})}),[g]),Object(_.jsxs)("div",{className:"grid",children:[i?Object(_.jsxs)("div",{style:{textAlign:"center"},className:"card",id:n&&!r?"video1":"video3",children:[Object(_.jsx)("div",{style:{height:"2rem"},children:Object(_.jsx)("h3",{children:M&&o})}),Object(_.jsxs)("div",{className:"video-avatar-container",children:[Object(_.jsx)("video",{playsInline:!0,muted:!0,onClick:I,ref:a,autoPlay:!0,className:"video-active",style:{opacity:"".concat(M?"1":"0")}}),Object(_.jsx)(m.a,{style:{backgroundColor:"#116",position:"absolute",opacity:"".concat(M?"-1":"2")},size:98,icon:!o&&Object(_.jsx)(S.a,{}),children:o})]}),Object(_.jsxs)("div",{className:"iconsDiv",children:[Object(_.jsx)("div",{className:"icons",onClick:function(){D()},tabIndex:"0",children:Object(_.jsx)("i",{className:"fa fa-microphone".concat(E?"":"-slash"),style:{transform:"scaleX(-1)"},"aria-label":"".concat(E?"mic on":"mic off"),"aria-hidden":"true"})}),n&&!r&&Object(_.jsx)("div",{className:"icons",onClick:function(){G(!L)},tabIndex:"0",children:Object(_.jsx)("img",{src:v,alt:"chat icon"})}),Object(_.jsxs)(f.a,{title:"Chat",footer:null,visible:L,onOk:function(){return J(!1)},onCancel:function(){return J(!1)},style:{maxHeight:"100px"},children:[C.length?Object(_.jsxs)("div",{className:"msg_flex",children:[C.map((function(e){return Object(_.jsx)("div",{className:"sent"===e.type?"msg_sent":"msg_rcv",children:e.msg})})),Object(_.jsx)("div",{ref:H,id:"no_border"})]}):Object(_.jsx)("div",{className:"chat_img_div",children:Object(_.jsx)("img",{src:p,alt:"msg_illus",className:"img_illus"})}),Object(_.jsx)(R,{placeholder:"your message",allowClear:!0,className:"input_msg",enterButton:"Send \ud83d\ude80",onChange:function(e){return P(e.target.value)},value:z,size:"large",onSearch:function(e){e&&e.length&&j(e),P("")}})]}),n&&!r&&Object(_.jsx)("div",{className:"icons",onClick:function(){return T()},tabIndex:"0",children:Object(_.jsx)("img",{src:x,alt:"share screen"})}),Object(_.jsx)("div",{className:"icons",onClick:function(){return V()},tabIndex:"0",children:M?Object(_.jsx)("img",{src:h,alt:"video on icon"}):Object(_.jsx)("img",{src:O,alt:"video off icon"})})]})]}):Object(_.jsxs)("div",{className:"bouncing-loader",children:[Object(_.jsx)("div",{}),Object(_.jsx)("div",{}),Object(_.jsx)("div",{})]}),n&&!r&&s&&Object(_.jsxs)("div",{className:"card2",style:{textAlign:"center"},id:"video2",children:[Object(_.jsx)("div",{style:{height:"2rem"},children:Object(_.jsx)("h3",{children:A&&(t.name||w)})}),Object(_.jsxs)("div",{className:"video-avatar-container",children:[Object(_.jsx)("video",{playsInline:!0,ref:s,onClick:I,autoPlay:!0,className:"video-active",style:{opacity:"".concat(A?"1":"0")}}),Object(_.jsx)(m.a,{style:{backgroundColor:"#116",position:"absolute",opacity:"".concat(A?"-1":"2")},size:98,icon:!(w||t.name)&&Object(_.jsx)(S.a,{}),children:w||t.name}),!U&&Object(_.jsx)("i",{style:{position:"absolute",top:"0",left:"0",padding:"0.3rem",backgroundColor:"#fefefebf"},className:"fad fa-volume-mute fa-2x","aria-hidden":"true","aria-label":"microphone muted"})]})]})]})},T=n(49),A=n(171),V=n.p+"static/media/phone.b2c1ae6b.gif",E=n.p+"static/media/tune.5a98ad20.mp3",U=n(30),D=n(162),F=n.p+"static/media/hang.a09ef7b4.svg",q=n(316),z=n(102),P=n(317),W=function(){var e=Object(c.useState)(""),t=Object(u.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(!1),i=Object(u.a)(s,2),o=i[0],r=i[1],l=Object(c.useRef)(),b=Object(c.useContext)(d),m=b.call,h=b.callAccepted,g=(b.myVideo,b.userVideo,b.stream,b.name),O=b.setName,p=b.callEnded,v=b.me,x=b.callUser,y=b.leaveCall,C=b.answerCall,k=(b.otherUser,b.setOtherUser),N=b.leaveCall1;Object(c.useEffect)((function(){var e,t;o?null===l||void 0===l||null===(t=l.current)||void 0===t||t.play():null===l||void 0===l||null===(e=l.current)||void 0===e||e.pause()}),[o]);return Object(c.useEffect)((function(){m.isReceivingCall&&!h?(r(!0),k(m.from)):r(!1)}),[m.isReceivingCall]),Object(_.jsxs)("div",{className:U.options,children:[Object(_.jsxs)("div",{style:{marginBottom:"1.5rem",border:"2px solid",padding:"15px",boxShadow:"5px 10px 2px #2c292d"},children:[Object(_.jsx)("strong",{children:"Account Name"}),Object(_.jsx)(j.a,{size:"large",placeholder:"Your name",prefix:Object(_.jsx)(S.a,{}),maxLength:15,suffix:Object(_.jsxs)("small",{children:[g.length,"/15"]}),value:g,onChange:function(e){O(e.target.value),localStorage.setItem("name",e.target.value)},className:U.inputgroup}),Object(_.jsx)("div",{className:U.share_options,children:Object(_.jsx)(D.CopyToClipboard,{text:v,children:Object(_.jsx)(T.a,{type:"primary",style:{background:"dodgerblue",borderColor:"black",color:"#fdf9f3",boxShadow:"2px 5px 2px black"},icon:Object(_.jsx)(q.a,{}),className:U.btn,tabIndex:"0",onClick:function(){return w.b.success("Code copied successfully!")},children:"Copy Code"})})})]}),Object(_.jsxs)("div",{style:{marginBottom:"1.5rem",border:"2px solid",padding:"15px",boxShadow:"5px 10px 2px #2c292d"},children:[Object(_.jsx)("strong",{children:"Make A Call"}),Object(_.jsx)(j.a,{placeholder:"Enter code to call",size:"large",className:U.inputgroup,value:n,onChange:function(e){return a(e.target.value)},style:{marginRight:"0.5rem",marginBottom:"0.5rem"},prefix:Object(_.jsx)(S.a,{className:"site-form-item-icon"}),suffix:Object(_.jsx)(A.a,{title:"Enter code of the other user",children:Object(_.jsx)(z.a,{style:{color:"rgba(0,0,0,.45)"}})})}),h&&!p?Object(_.jsxs)(T.a,{variant:"contained",onClick:y,className:U.hang,tabIndex:"0",children:[Object(_.jsx)("img",{src:F,alt:"hang up",style:{height:"15px"}}),"\xa0 Hang up"]}):Object(_.jsx)(T.a,{type:"primary",style:{background:"dodgerblue",borderColor:"black",color:"fdf9f3",boxShadow:"2px 5px 2px black",margin:"auto"},icon:Object(_.jsx)(P.a,{}),onClick:function(){g.length?x(n):w.b.error("Please enter your name to call!")},className:U.btn,tabIndex:"0",children:"Call"})]}),m.isReceivingCall&&!h&&Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("audio",{src:E,loop:!0,ref:l}),Object(_.jsxs)(f.a,{title:"Incoming Call",visible:o,onOk:function(){r(!1)},onCancel:function(){r(!1),N(),window.location.reload()},footer:null,children:[Object(_.jsx)("div",{style:{display:"flex",justifyContent:"space-around"},children:Object(_.jsxs)("h1",{children:[m.name," is calling you:"," ",Object(_.jsx)("img",{src:V,alt:"phone ringing",className:U.phone,style:{display:"inline-block"}})]})}),Object(_.jsxs)("div",{className:U.btnDiv,children:[Object(_.jsx)(T.a,{variant:"contained",className:U.answer,color:"#29bb89",icon:Object(_.jsx)(P.a,{}),onClick:function(){C(),l.current.pause()},tabIndex:"0",children:"Answer"}),Object(_.jsx)(T.a,{variant:"contained",className:U.decline,icon:Object(_.jsx)(P.a,{}),onClick:function(){r(!1),l.current.pause()},tabIndex:"0",children:"Decline"})]})]})]})]})},B=n(52),L=(n(300),function(){return Object(_.jsxs)("footer",{className:"footer",children:[Object(_.jsx)(B.a,{tag:"a",color:"none",className:"m-2",style:{color:"#111166"},href:"https://github.com/Parham-S",children:Object(_.jsx)(B.b,{fab:!0,icon:"github",size:"2x"})}),Object(_.jsx)(B.a,{tag:"a",color:"none",className:"m-2",style:{color:"#111166"},children:Object(_.jsx)(B.b,{fab:!0,icon:"dev",size:"2x"})}),Object(_.jsx)(B.a,{tag:"a",color:"none",className:"m-2",style:{color:"#111166"},children:Object(_.jsx)(B.b,{fab:!0,icon:"linkedin-in",size:"2x"})})]})}),G=function(){return Object(c.useEffect)((function(){navigator.onLine||alert("Connect to internet!")}),[navigator]),Object(c.useEffect)((function(){for(var e=document.cookie.split(";"),t=0;t<e.length;t++){var n=e[t],c=n.indexOf("="),a=c>-1?n.substr(0,c):n;document.cookie=a+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT"}}),[]),Object(_.jsx)(M,{children:Object(_.jsxs)("div",{className:"App",style:{height:"100%",width:"100%"},children:[Object(_.jsx)(I,{}),Object(_.jsx)(W,{})]})})},H=(n(301),n(302),function(){return Object(_.jsxs)(o.a,{children:[Object(_.jsx)(r.c,{children:Object(_.jsx)(r.a,{path:"/",component:G})}),Object(_.jsx)(L,{})]})}),J=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,318)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),s(e),i(e)}))},Q=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function X(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}i.a.render(Object(_.jsx)(a.a.StrictMode,{children:Object(_.jsx)(H,{})}),document.getElementById("root")),J(),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");Q?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var c=n.headers.get("content-type");404===n.status||null!=c&&-1===c.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):X(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):X(t,e)}))}}()}},[[306,1,2]]]);
//# sourceMappingURL=main.2251f5a6.chunk.js.map